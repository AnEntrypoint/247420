<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>247420 TV Guide - Retro Schedule Interface</title>
    <link rel="icon" href="logo.gif" type="image/gif">

    <!-- SEO Meta Tags -->
    <meta name="description" content="Browse the complete 247420 schedule - Authentic retro TV guide interface with nostalgic CRT aesthetics">
    <meta name="keywords" content="247420 tv guide, retro television, tv schedule, crt effects, vintage tv">
    <meta name="robots" content="index, follow">

    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://247420.247247420.xyz/tv-guide.html">
    <meta property="og:title" content="247420 TV Guide - Retro Schedule">
    <meta property="og:description" content="Authentic retro TV guide with complete programming schedule">
    <meta property="og:image" content="https://247420.247247420.xyz/logo.gif">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="247420 TV Guide">
    <meta name="twitter:description" content="Authentic retro TV guide with complete programming schedule">
    <meta name="twitter:image" content="https://247420.247247420.xyz/logo.gif">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Share+Tech+Mono&family=Fredoka:wght@300;400;500;600;700&family=Roboto+Mono:wght@300;400;500&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <!-- Shared Components -->
    <link rel="stylesheet" href="navbar.css">

    <!-- TV Guide CSS from 420sched -->
    <link rel="stylesheet" href="../420sched/tv-guide/css/tv-guide.css">
</head>
<body>
    <!-- Navigation -->
    <div class="navigation-container">
        <iframe src="navigation.html" frameborder="0" width="100%" height="60px"></iframe>
    </div>

    <!-- CRT Effects Overlay -->
    <div class="crt-overlay crt-scanlines crt-static crt-flicker"></div>

    <!-- TV Guide Container -->
    <div class="tv-guide-container crt-curve">
        <!-- TV Header -->
        <header class="tv-header">
            <h1 class="tv-title" id="tvTitle">247420 TV GUIDE</h1>
            <p class="tv-subtitle" id="tvSubtitle">Your Complete Retro Programming Schedule</p>
        </header>

        <!-- Channel Grid -->
        <div class="channel-grid" id="channelGrid">
            <!-- Time Headers -->
            <div class="time-headers" id="timeHeaders">
                <!-- Time slots will be generated by JavaScript -->
            </div>

            <!-- Channel Rows -->
            <div id="channelRows">
                <!-- Channel content will be generated by JavaScript -->
            </div>
        </div>

        <!-- Loading State -->
        <div class="loading-state" id="loadingState">
            <div class="tv-static-effect">
                <i class="fas fa-tv"></i>
                <p>Loading TV Guide...</p>
            </div>
        </div>

        <!-- Error State -->
        <div class="error-state" id="errorState" style="display: none;">
            <div class="tv-error-message">
                <i class="fas fa-exclamation-triangle"></i>
                <p>Unable to load TV Guide</p>
                <button onclick="retryLoading()">Try Again</button>
            </div>
        </div>
    </div>

    <!-- TV Guide JavaScript from 420sched -->
    <script src="../420sched/tv-guide/js/tv-guide.js"></script>

    <script>
        // Custom configuration for 247420 project
        window.addEventListener('DOMContentLoaded', function() {
            // Override default configuration
            if (window.tvGuide) {
                window.tvGuideConfig = {
                    title: "247420 TV GUIDE",
                    subtitle: "Your Complete Retro Programming Schedule",
                    apiUrl: "../420sched/tv-guide/data/sample-schedule.json",
                    refreshInterval: 60000,
                    timezone: "UTC",
                    brandColor: "#ff6b35"
                };

                // Update page title
                document.getElementById('tvTitle').textContent = window.tvGuideConfig.title;
                document.getElementById('tvSubtitle').textContent = window.tvGuideConfig.subtitle;

                // Initialize with custom data
                loadTVGuide();
            }
        });

        // Custom retry function
        function retryLoading() {
            document.getElementById('errorState').style.display = 'none';
            document.getElementById('loadingState').style.display = 'block';
            loadTVGuide();
        }

        // Load TV Guide with custom configuration
        async function loadTVGuide() {
            try {
                const response = await fetch(window.tvGuideConfig.apiUrl);
                if (!response.ok) throw new Error('Failed to load schedule');

                const data = await response.json();

                // Hide loading state
                document.getElementById('loadingState').style.display = 'none';

                // Initialize TV Guide with data
                if (window.initializeTVGuide) {
                    window.initializeTVGuide(data);
                }

            } catch (error) {
                console.error('Error loading TV Guide:', error);
                document.getElementById('loadingState').style.display = 'none';
                document.getElementById('errorState').style.display = 'block';
            }
        }
    </script>
</body>
</html>